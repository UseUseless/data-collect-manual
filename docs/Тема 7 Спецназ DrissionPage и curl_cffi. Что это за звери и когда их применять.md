# –¢–µ–º–∞ 7: –°–ø–µ—Ü–Ω–∞–∑: DrissionPage –∏ curl_cffi. –ß—Ç–æ —ç—Ç–æ –∑–∞ –∑–≤–µ—Ä–∏ –∏ –∫–æ–≥–¥–∞ –∏—Ö –ø—Ä–∏–º–µ–Ω—è—Ç—å?

–¢—ã –∏–∑—É—á–∏–ª `httpx` (–ø–µ—Ö–æ—Ç–∞) –∏ `Playwright` (—Ç–∞–Ω–∫–∏). –ù–æ –±—ã–≤–∞–µ—Ç —Ç–∞–∫:

1. –¢—ã —à–ª–µ—à—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ `httpx` ‚Äî –ø–æ–ª—É—á–∞–µ—à—å **403 Forbidden**.
2. –¢—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –±—Ä–∞—É–∑–µ—Ä —á–µ—Ä–µ–∑ `Playwright` ‚Äî —Ç–µ–±—è –≤—Å—Ç—Ä–µ—á–∞–µ—Ç **Captcha** –∏–ª–∏ –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω —Å –Ω–∞–¥–ø–∏—Å—å—é "Checking your browser...".

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **WAF (Web Application Firewall)** —Ç–∏–ø–∞ Cloudflare, Akamai –∏–ª–∏ Datadome. –û–Ω–∏ –ø–∞–ª—è—Ç —Ç–µ–±—è –Ω–µ –ø–æ IP, –∞ –ø–æ "–æ—Ç–ø–µ—á–∞—Ç–∫–∞–º".

–¢—É—Ç –≤—ã—Ö–æ–¥–∏—Ç —Å–ø–µ—Ü–Ω–∞–∑.

---

### 1. `curl_cffi` ‚Äî "–ù–∏–Ω–¥–∑—è-—Ö–∞–º–µ–ª–µ–æ–Ω"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–≥–¥–∞ Python (`requests`/`httpx`) —Å—Ç—É—á–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É SSL. –£ –Ω–µ—ë –µ—Å—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π "–ø–æ—á–µ—Ä–∫" (TLS Fingerprint –∏–ª–∏ JA3).
–°–µ—Ä–≤–µ—Ä –≤–∏–¥–∏—Ç —ç—Ç–æ—Ç –ø–æ—á–µ—Ä–∫ –∏ –≥–æ–≤–æ—Ä–∏—Ç: *"–ê–≥–∞, —ç—Ç–æ —Å–∫—Ä–∏–ø—Ç –Ω–∞ –ü–∏—Ç–æ–Ω–µ, –∞ –Ω–µ Chrome. –ë–∞–Ω."*

**–†–µ—à–µ–Ω–∏–µ:** `curl_cffi` ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–º–µ–Ω—è–µ—Ç —ç—Ç–æ—Ç –ø–æ—á–µ—Ä–∫. –û–Ω–∞ –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ (C-binding) –∏–º–∏—Ç–∏—Ä—É–µ—Ç TLS-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ (Chrome, Firefox, Safari).

- **–¢–∏–ø:** HTTP-–∫–ª–∏–µ–Ω—Ç (–±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–∞).
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
    - –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –Ω–æ –≤ Python –¥–∞–µ—Ç 403.
    - –ù—É–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å (–±–µ–∑ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ JS), –Ω–æ –æ–±—ã—á–Ω—ã–µ –ª–∏–±—ã –Ω–µ –ø—É—Å–∫–∞—é—Ç.
- **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –û–Ω–∞ –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–ø–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `requests`.

```python
from curl_cffi import requests

# impersonate="chrome110" ‚Äî —ç—Ç–æ –º–∞–≥–∏—è.
# –ú—ã –≥–æ–≤–æ—Ä–∏–º: "–í–µ–¥–∏ —Å–µ–±—è –∫–∞–∫ Chrome –≤–µ—Ä—Å–∏–∏ 110".
response = requests.get(
    "<https://tls.browserleaks.com/json>",
    impersonate="chrome110"
)

print(response.json())
# –°–µ—Ä–≤–µ—Ä —É–≤–∏–¥–∏—Ç, —á—Ç–æ –∫ –Ω–µ–º—É –ø—Ä–∏—à–µ–ª –†–ï–ê–õ–¨–ù–´–ô Chrome, –∞ –Ω–µ python-—Å–∫—Ä–∏–ø—Ç.

```

- **–ë–æ–Ω—É—Å:** –£ –Ω–µ—ë –µ—Å—Ç—å `AsyncSession` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏.

---

### 2. `DrissionPage` ‚Äî "–ö–∏–±–µ—Ä-–Ω–∞–µ–º–Ω–∏–∫"

**–ü—Ä–æ–±–ª–µ–º–∞:** `Selenium` –∏ `Playwright` –æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–ª–µ–¥—ã "–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏". –£ –Ω–∏—Ö –µ—Å—Ç—å —Ñ–ª–∞–≥–∏ —Ç–∏–ø–∞ `navigator.webdriver = true`. –°–∞–π—Ç—ã –≤–∏–¥—è—Ç —ç—Ç–∏ —Ñ–ª–∞–≥–∏ –∏ –∫–∏–¥–∞—é—Ç –∫–∞–ø—á—É. Playwright –ø—ã—Ç–∞–µ—Ç—Å—è —ç—Ç–æ —Å–∫—Ä—ã—Ç—å (Stealth-–ø–ª–∞–≥–∏–Ω—ã), –Ω–æ –≥–æ–Ω–∫–∞ –≤–æ–æ—Ä—É–∂–µ–Ω–∏–π –Ω–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** `DrissionPage` ‚Äî —ç—Ç–æ –∫–∏—Ç–∞–π—Å–∫–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ø–æ—ç—Ç–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–µ—Å—Ç–∞–º–∏... —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è, –Ω–æ –∫–æ–¥ –º–æ—â–Ω—ã–π).
–û–Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä–æ–º **–Ω–∞–ø—Ä—è–º—É—é** —á–µ—Ä–µ–∑ CDP (Chrome DevTools Protocol), –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è Webdriver. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë –≥–æ—Ä–∞–∑–¥–æ –º–µ–Ω–µ–µ –∑–∞–º–µ—Ç–Ω–æ–π –¥–ª—è –∞–Ω—Ç–∏-–±–æ—Ç —Å–∏—Å—Ç–µ–º.

- **–ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞:** –£–º–µ–µ—Ç –Ω–∞ –ª–µ—Ç—É –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–æ–º **Browser** (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥) –∏ —Ä–µ–∂–∏–º–æ–º **Requests** (–±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã).
- **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:**
    - Cloudflare Turnstile (–≥–∞–ª–æ—á–∫–∞ "–Ø –Ω–µ —Ä–æ–±–æ—Ç") –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ Playwright.
    - –ù—É–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å, –Ω–æ Selenium –ø–∞–ª–∏—Ç—Å—è.
- **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:** –û—á–µ–Ω—å –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Selenium.

```python
from DrissionPage import ChromiumPage

# –ó–∞–ø—É—Å–∫–∞–µ–º –±—Ä–∞—É–∑–µ—Ä
page = ChromiumPage()

# –ò–¥–µ–º –Ω–∞ —Å–∞–π—Ç —Å –∑–∞—â–∏—Ç–æ–π
page.get('<https://nowsecure.nl>')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Cloudflare —á–∞—Å—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–∞–º–∞,
# –ø–æ—Ç–æ–º—É —á—Ç–æ DrissionPage —É–ø—Ä–∞–≤–ª—è–µ—Ç –º—ã—à—å—é –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã,
# –∞ –Ω–µ —á–µ—Ä–µ–∑ JS-–∏–Ω—ä–µ–∫—Ü–∏–∏.

# –ü–∞—Ä—Å–∏–Ω–≥ (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ—Ö–æ–∂ –Ω–∞ —Å–º–µ—Å—å BS4 –∏ Selenium)
ele = page.ele('.callout')
print(ele.text)

page.quit()

```

---

### ‚öîÔ∏è –°–†–ê–í–ù–ï–ù–ò–ï –°–ü–ï–¶–°–†–ï–î–°–¢–í

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –°—É—Ç—å | –ü—Ä–æ—Ç–∏–≤ –∫–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç | –°–∫–æ—Ä–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
| --- | --- | --- | --- | --- |
| **httpx/requests** | –ß–µ—Å—Ç–Ω—ã–π –∫–ª–∏–µ–Ω—Ç | –ü—Ä–æ—Ç–∏–≤ —Å–ª–∞–±—ã—Ö —Å–∞–π—Ç–æ–≤ | ‚ö° –ú–æ–ª–Ω–∏—è | –õ–µ–≥–∫–æ |
| **curl_cffi** | **–ü–æ–¥–¥–µ–ª–∫–∞ TLS** | –ü—Ä–æ—Ç–∏–≤ Cloudflare (–Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–ø—Ä–æ—Å–æ–≤) | ‚ö° –ú–æ–ª–Ω–∏—è | –õ–µ–≥–∫–æ |
| **Playwright** | –ß–µ—Å—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä | –ü—Ä–æ—Ç–∏–≤ SPA / JS-—Å–∞–π—Ç–æ–≤ | üê¢ –ú–µ–¥–ª–µ–Ω–Ω–æ | –°—Ä–µ–¥–Ω–µ |
| **DrissionPage** | **–°—Ç–µ–ª—Å-–±—Ä–∞—É–∑–µ—Ä** | –ü—Ä–æ—Ç–∏–≤ Cloudflare (JS + Captcha) | üê¢ –ú–µ–¥–ª–µ–Ω–Ω–æ | –°—Ä–µ–¥–Ω–µ |

---

### üß† –í—ã–≤–æ–¥ –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞:

1. **–¢–≤–æ–π –ø–µ—Ä–≤—ã–π —à–∞–≥:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–±—É–π `httpx`.
2. **–ï—Å–ª–∏ 403:** –ù–µ —Å–ø–µ—à–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä. –ü–æ–ø—Ä–æ–±—É–π **`curl_cffi`**. –ï—Å–ª–∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Ç—ã —Å—ç–∫–æ–Ω–æ–º–∏–ª –∫—É—á—É —Ä–µ—Å—É—Ä—Å–æ–≤.
3. **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω JS –∏ –∑–∞—â–∏—Ç–∞ –ª—é—Ç–∞—è:** Playwright —Å –ø–ª–∞–≥–∏–Ω–æ–º `playwright-stealth` ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç.
4. **–ï—Å–ª–∏ Playwright –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (–∫–∞–ø—á–∏, –≤–µ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏):** –î–æ—Å—Ç–∞–≤–∞–π **`DrissionPage`**. –°–µ–π—á–∞—Å (–≤ 2024-2026) —ç—Ç–æ "–º–µ—Ç–∞" –¥–ª—è –ø—Ä–æ–±–∏–≤–∞ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞—â–∏—Ç. –ù–æ –ø–æ–º–Ω–∏: —ç—Ç–æ —Ç—è–∂–µ–ª–∞—è –∞—Ä—Ç–∏–ª–ª–µ—Ä–∏—è.

**–ë–ª–æ–∫ 2 (–ê—Ä—Å–µ–Ω–∞–ª) –∑–∞–∫—Ä—ã—Ç.**
–£ —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: –æ—Ç –ø–µ—Ä–æ—á–∏–Ω–Ω–æ–≥–æ –Ω–æ–∂–∏–∫–∞ (`httpx`) –¥–æ –≥—Ä–∞–Ω–∞—Ç–æ–º–µ—Ç–∞ (`DrissionPage`).