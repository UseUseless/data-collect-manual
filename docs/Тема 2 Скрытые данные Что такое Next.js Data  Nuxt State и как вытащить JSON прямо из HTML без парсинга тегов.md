# –¢–µ–º–∞ 2: –°–∫—Ä—ã—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ: –ß—Ç–æ —Ç–∞–∫–æ–µ Next.js Data / Nuxt State –∏ –∫–∞–∫ –≤—ã—Ç–∞—â–∏—Ç—å JSON –ø—Ä—è–º–æ –∏–∑ HTML –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–≥–æ–≤?

–ó–∞–±—É–¥—å –ø—Ä–æ `soup.find('div', class_='price-v2-red')`. –≠—Ç–æ –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤. –ö–ª–∞—Å—Å—ã –º–µ–Ω—è—é—Ç—Å—è, –≤–µ—Ä—Å—Ç–∫–∞ –µ–¥–µ—Ç, –¥–∏–∑–∞–π–Ω–µ—Ä—ã –¥–≤–∏–≥–∞—é—Ç –∫–Ω–æ–ø–∫–∏.
–î–∞–Ω–Ω—ã–µ ("State" –∏–ª–∏ "–°–æ—Å—Ç–æ—è–Ω–∏–µ") ‚Äî –≤–µ—á–Ω—ã.

–ï—Å–ª–∏ —Å–∞–π—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **Next.js** (React) –∏–ª–∏ **Nuxt.js** (Vue), —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Å—Ç–∞–≤–ª—è—é—Ç –Ω–∞–º –ø–æ–¥–∞—Ä–æ–∫. –û–Ω–∏ –æ–±—è–∑–∞–Ω—ã –ø–µ—Ä–µ–¥–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä—É "—Å–ª–µ–ø–æ–∫" –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã JS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∑–Ω–∞–ª, —á—Ç–æ —Ä–∏—Å–æ–≤–∞—Ç—å. –ò —ç—Ç–æ—Ç —Å–ª–µ–ø–æ–∫ –ª–µ–∂–∏—Ç –≤ HTML –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞.

–ù–∞—à–∞ –∑–∞–¥–∞—á–∞: **–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏ –≤—ã—Ä–µ–∑–∞—Ç—å —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ Python Dictionary.**

---

### 1. –ì–¥–µ –ª–µ–∂–∏—Ç –∫–ª–∞–¥? (–ê–Ω–∞—Ç–æ–º–∏—è)

### –¢–∏–ø –ê: Next.js (–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ Next.js ‚Äî —Å–≤—è—Ç—ã–µ –ª—é–¥–∏. –û–Ω–∏ –∫–ª–∞–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ–≥ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º ID. –≠—Ç–æ **–≤–∞–ª–∏–¥–Ω—ã–π JSON**.

- **–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç:**
    
    ```html
    <script id="__NEXT_DATA__" type="application/json">
    {"props":{"pageProps":{"product":{"id":123,"name":"Iphone","price":999}}}}
    </script>
    
    ```
    
- **–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏:** –í–æ–æ–±—â–µ –≤—Å—ë. –î–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏, –∏ —á–∞—Å—Ç–æ –¥–∞–∂–µ —Ç–æ, —á—Ç–æ —Å–∫—Ä—ã—Ç–æ –Ω–∞ —Å–∞–π—Ç–µ (–æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ, —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ID).

### –¢–∏–ø –ë: Nuxt.js / Redux State / Global Variables

–¢—É—Ç —Å–ª–æ–∂–Ω–µ–µ. –≠—Ç–æ –Ω–µ —á–∏—Å—Ç—ã–π JSON, –∞ **JavaScript-–æ–±—ä–µ–∫—Ç**. –ö–ª—é—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –±–µ–∑ –∫–∞–≤—ã—á–µ–∫, –º–æ–≥—É—Ç –±—ã—Ç—å `undefined`.

- **–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç:**
–ò–ª–∏:
    
    ```html
    <script>window.__NUXT__=(function(a,b){return {state:{product:{name:"Iphone"}}...}});</script>
    
    ```
    
    ```html
    <script>window.initialState = {user: {id: 1, name: 'Alex'}}</script>
    
    ```
    

---

### 2. –ß–µ–º –¥–æ–±—ã–≤–∞—Ç—å? (–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π)

### –î–ª—è Next.js (–ß–∏—Å—Ç—ã–π JSON)

–¢–µ–±–µ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `json` –∏ –ª—é–±–æ–π HTML-–ø–∞—Ä—Å–µ—Ä (—Ö–æ—Ç—å `BeautifulSoup`, —Ö–æ—Ç—å `Selectolax`), —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç–µ–≥.

### –î–ª—è Nuxt.js –∏ "–ì—Ä—è–∑–Ω–æ–≥–æ JS" (–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `chompjs`)

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `json.loads()` —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ `{key: "value"}` (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫ —É –∫–ª—é—á–∞) ‚Äî —ç—Ç–æ –≤–∞–ª–∏–¥–Ω—ã–π JS, –Ω–æ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.
–¢—É—Ç –Ω–∞ —Å—Ü–µ–Ω—É –≤—ã—Ö–æ–¥–∏—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ **`chompjs`**.

- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –û–Ω–∞ –±–µ—Ä–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –∫—Ä–∏–≤—ã–º JS-–æ–±—ä–µ–∫—Ç–æ–º –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –µ—ë –≤ –≤–∞–ª–∏–¥–Ω—ã–π Python dict. –û–Ω–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º—É—Å–æ—Ä, –≤—ã—Ç–∞—Å–∫–∏–≤–∞—è —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ.
- *–£—Å—Ç–∞–Ω–æ–≤–∫–∞:* `pip install chompjs`

---

### 3. –¢–µ—Ö–Ω–∏–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (Code Snippets)

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–¥–µ–∞–ª—å–Ω—ã–π Next.js

```python
import json
from bs4 import BeautifulSoup # –ò–ª–∏ Selectolax, –Ω–µ–≤–∞–∂–Ω–æ
import httpx

html = httpx.get("<https://example-nextjs-site.com>").text
soup = BeautifulSoup(html, "lxml")

# 1. –ò—â–µ–º —Ç–µ–≥ –ø–æ ID
script_tag = soup.find("script", id="__NEXT_DATA__")

if script_tag:
    # 2. –ë–µ—Ä–µ–º —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏
    json_text = script_tag.string

    # 3. –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ —Å–ª–æ–≤–∞—Ä—å
    data = json.loads(json_text)

    # 4. –†–∞–¥—É–µ–º—Å—è. –ü—É—Ç—å –¥–æ –¥–∞–Ω–Ω—ã—Ö –æ–±—ã—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–π, –Ω–æ –Ω–∞–¥–µ–∂–Ω—ã–π:
    product = data['props']['pageProps']['product']
    print(f"–¢–æ–≤–∞—Ä: {product['name']}, –¶–µ–Ω–∞: {product['price']}")

```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ì—Ä—è–∑–Ω—ã–π JS (Nuxt/Other)

```python
import chompjs
import httpx
from bs4 import BeautifulSoup

html = httpx.get("<https://example-nuxt-site.com>").text
soup = BeautifulSoup(html, "lxml")

# 1. –ò—â–µ–º —Å–∫—Ä–∏–ø—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–ª—é—á–µ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
# –¢—É—Ç –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ–∏—Å–∫–∞—Ç—å –≥–ª–∞–∑–∞–º–∏ –≤ Ctrl+U, –∫–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
# __NUXT__, __INITIAL_STATE__, window.App
scripts = soup.find_all("script")
target_script = None

for script in scripts:
    if script.string and "window.__NUXT__" in script.string:
        target_script = script.string
        break

if target_script:
    # 2. –°–∫–∞—Ä–º–ª–∏–≤–∞–µ–º –í–ï–°–¨ –∫—É—Å–æ–∫ –∫–æ–¥–∞ –≤ chompjs
    # –û–Ω —Å–∞–º –Ω–∞–π–¥–µ—Ç –æ–±—ä–µ–∫—Ç –∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç –µ–≥–æ
    data = chompjs.parse_js_object(target_script)

    print(data) # –≠—Ç–æ —É–∂–µ Python Dict

```

---

### üïµÔ∏è‚Äç‚ôÇÔ∏è –ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ, —á–µ–º –ø–∞—Ä—Å–∏—Ç—å HTML?

1. **–ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:** –í HTML –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–æ "–¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π", –∞ –≤ JSON –ª–µ–∂–∞—Ç –ø–æ–ª—è `price_regular`, `price_discount`, `currency`, `vat_rate`. –¢—ã –ø–æ–ª—É—á–∞–µ—à—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã.
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –í HTML "1 000 —Ä—É–±." ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å –ø—Ä–æ–±–µ–ª–æ–º –∏ –º—É—Å–æ—Ä–æ–º. –í JSON —ç—Ç–æ `1000` (integer). –ù–µ –Ω–∞–¥–æ —á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.
3. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –í–µ—Ä—Å—Ç–∫—É (CSS-–∫–ª–∞—Å—Å—ã) –º–µ–Ω—è—é—Ç —Ä–∞–∑ –≤ –º–µ—Å—è—Ü. –°—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö (`props`) –º–µ–Ω—è—é—Ç —Ä–∞–∑ –≤ –≥–æ–¥, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ª–æ–º–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.

**–†–µ–∑—é–º–µ:**
–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–∞—Ä—Å–∏—Ç—å –∫–ª–∞—Å—Å—ã `div`'–æ–≤, –ø–æ—Ç—Ä–∞—Ç—å 5 –º–∏–Ω—É—Ç –Ω–∞ –ø–æ–∏—Å–∫ `__NEXT_DATA__` –∏–ª–∏ `window.__STATE__`. –ï—Å–ª–∏ –Ω–∞–π–¥–µ—à—å ‚Äî —Å—ç–∫–æ–Ω–æ–º–∏—à—å 5 —á–∞—Å–æ–≤ –æ—Ç–ª–∞–¥–∫–∏.