# –¢–µ–º–∞ 4: –°–µ—Ç–µ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã: requests vs httpx vs aiohttp. –ü–æ—á–µ–º—É requests ‚Äî —ç—Ç–æ –ª–µ–≥–∞—Å–∏, –∏ –∑–∞—á–µ–º –Ω–∞–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å?

–í –ø–∞—Ä—Å–∏–Ω–≥–µ –µ—Å—Ç—å –¥–≤–∞ –≥—Ä–µ—Ö–∞: **—Ç—É–ø–æ—Å—Ç—å** (–ø–ª–æ—Ö–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º) –∏ **–ø—Ä–æ—Å—Ç–æ–π** (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞).
–í—ã–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –±—É–¥–µ—Ç —Ç–≤–æ–π —Å–∫—Ä–∏–ø—Ç —Å–ø–∞—Ç—å 90% –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å.

### 1. Requests ‚Äî "–°—Ç–∞—Ä—ã–π –¥–æ–±—Ä—ã–π —Ç–æ—Ä–º–æ–∑"

–≠—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —É—á–∏–ª–∏—Å—å –Ω–∞—à–∏ –¥–µ–¥—ã.

- **–¢–∏–ø:** –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (–ë–ª–æ–∫–∏—Ä—É—é—â–∞—è).
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –¢—ã –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å -> –°–∫—Ä–∏–ø—Ç **–ó–ê–ú–ï–†** –∏ –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞. –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∫—É—Ä–∏—Ç, –ø–∞–º—è—Ç—å –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç. –ü–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç (–∏–ª–∏ –Ω–µ –æ—Ç–≤–∞–ª–∏—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É), —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è.
- **–ê–Ω–∞–ª–æ–≥–∏—è:** –¢—ã –∑–∞–∫–∞–∑–∞–ª –ø–∏—Ü—Ü—É –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏ —Å—Ç–æ–∏—à—å —É –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º —Ä—Ç–æ–º, –æ–∂–∏–¥–∞—è –∫—É—Ä—å–µ—Ä–∞. –¢—ã –Ω–µ –º–æ–∂–µ—à—å –Ω–∏ —á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É, –Ω–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –¢–í. –¢—ã –ø—Ä–æ—Å—Ç–æ –∂–¥–µ—à—å.
- **–í–µ—Ä–¥–∏–∫—Ç:** –î–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ "—Å–ø–∞—Ä—Å–∏—Ç—å 5 —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–∞–∑ –≤ –¥–µ–Ω—å" ‚Äî –ø–æ–π–¥–µ—Ç. –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ 1000+ —Å—Ç—Ä–∞–Ω–∏—Ü ‚Äî **—Å–º–µ—Ä—Ç—å**. 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ 1 —Å–µ–∫—É–Ω–¥–µ = 16 –º–∏–Ω—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è.
- **–ú–∏–Ω—É—Å:** –ù–µ —É–º–µ–µ—Ç HTTP/2.

### 2. Aiohttp ‚Äî "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä"

–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

- **–¢–∏–ø:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (Non-blocking).
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –¢—ã –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å -> –°–∫—Ä–∏–ø—Ç **–ù–ï –ñ–î–ï–¢**, –∞ –∏–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É. –ö–æ–≥–¥–∞ –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥–µ—Ç, —Å–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω–µ—Ç—Å—è –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –µ–≥–æ.
- **–ê–Ω–∞–ª–æ–≥–∏—è:** –¢—ã –∑–∞–∫–∞–∑–∞–ª –ø–∏—Ü—Ü—É, –ø–æ–ª–æ–∂–∏–ª —Ç—Ä—É–±–∫—É –∏ –ø–æ—à–µ–ª –∏–≥—Ä–∞—Ç—å –≤ PlayStation. –ó–∞–∫–∞–∑–∞–ª —Å—É—à–∏ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏–ª –∏–≥—Ä–∞—Ç—å. –ö—É—Ä—å–µ—Ä—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —Ç—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–±–∏—Ä–∞–µ—à—å –µ–¥—É –≤ –ø–µ—Ä–µ—Ä—ã–≤–∞—Ö.
- **–°–∫–æ—Ä–æ—Å—Ç—å:** 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ. –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è = –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–∞–º–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. 16 –º–∏–Ω—É—Ç –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ 10 —Å–µ–∫—É–Ω–¥.
- **–ú–∏–Ω—É—Å:** API —á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º —É `requests`. –ù—É–∂–Ω–æ –∑–Ω–∞—Ç—å `async/await`.

### 3. Httpx ‚Äî "–ù–æ–≤—ã–π –ö–æ—Ä–æ–ª—å"

–≠—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ `requests`, –≤–æ–±—Ä–∞–≤—à–∞—è –≤ —Å–µ–±—è –≤—Å—ë –ª—É—á—à–µ–µ.

- **–¢–∏–ø:** –ì–∏–±—Ä–∏–¥ (—É–º–µ–µ—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ).
- **–ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **HTTP/2** –∏–∑ –∫–æ—Ä–æ–±–∫–∏. `aiohttp` –∏ `requests` —ç—Ç–æ–≥–æ –Ω–µ —É–º–µ—é—Ç (–±–µ–∑ —Ç–∞–Ω—Ü–µ–≤ —Å –±—É–±–Ω–æ–º).
- **API:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å `requests`. –ü–µ—Ä–µ–µ—Ö–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ ‚Äî –¥–µ–ª–æ 5 –º–∏–Ω—É—Ç.
- **–í–µ—Ä–¥–∏–∫—Ç:** –≠—Ç–æ –º–æ–π –≤—ã–±–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ 2026 –≥–æ–¥—É.

---

### ‚öîÔ∏è –°–†–ê–í–ù–ï–ù–ò–ï –í –ë–û–Æ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Requests | Aiohttp | Httpx |
| --- | --- | --- | --- |
| **–†–µ–∂–∏–º** | –¢–æ–ª—å–∫–æ Sync | –¢–æ–ª—å–∫–æ Async | Sync + Async |
| **–°–∫–æ—Ä–æ—Å—Ç—å (1000 URL)** | üêå –ß–µ—Ä–µ–ø–∞—Ö–∞ | üöÄ –†–∞–∫–µ—Ç–∞ | üöÄ –†–∞–∫–µ—Ç–∞ (–≤ async —Ä–µ–∂–∏–º–µ) |
| **HTTP/2** | ‚ùå –ù–µ—Ç | ‚ùå –°–ª–æ–∂–Ω–æ | ‚úÖ –î–∞ (`http2=True`) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –õ–µ–≥–∫–æ | –°—Ä–µ–¥–Ω–µ | –õ–µ–≥–∫–æ |
| **–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å** | –û–≥—Ä–æ–º–Ω–∞—è (Legacy) | –í—ã—Å–æ–∫–∞—è (Prod) | –†–∞—Å—Ç–µ—Ç (Modern) |

---

### üë®‚Äçüíª –ö–û–î: –ü–æ—á—É–≤—Å—Ç–≤—É–π —Ä–∞–∑–Ω–∏—Ü—É

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∞–¥ (Requests):

```python
import requests
import time

start = time.time()
# –ú—ã –±—É–¥–µ–º –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ 3 —Ä–∞–∑–∞
for i in range(3):
    requests.get("<https://httpbin.org/delay/2>") # –ó–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫
    print(f"–ó–∞–ø—Ä–æ—Å {i} –≥–æ—Ç–æ–≤")

print(f"–ò—Ç–æ–≥: {time.time() - start:.2f} —Å–µ–∫")
# –ò–¢–û–ì: ~6.0+ —Å–µ–∫—É–Ω–¥. –£–∂–∞—Å.

```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞–π (Httpx / Aiohttp):

```python
import httpx
import asyncio
import time

async def main():
    async with httpx.AsyncClient(http2=True) as client:
        tasks = []
        start = time.time()
        # –°–æ–∑–¥–∞–µ–º 3 –∑–∞–¥–∞—á–∏, –Ω–æ –ù–ï –∂–¥–µ–º –∏—Ö —Å—Ä–∞–∑—É
        for i in range(3):
            tasks.append(client.get("<https://httpbin.org/delay/2>"))

        # –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!
        responses = await asyncio.gather(*tasks)

        print(f"–ò—Ç–æ–≥: {time.time() - start:.2f} —Å–µ–∫")
        # –ò–¢–û–ì: ~2.1 —Å–µ–∫—É–Ω–¥—ã. –í 3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ!

asyncio.run(main())

```

### üß† –í—ã–≤–æ–¥ –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞:

1. –ï—Å–ª–∏ —Ç—ã –ø–∏—à–µ—à—å —Å–∫—Ä–∏–ø—Ç "–Ω–∞ –∫–æ–ª–µ–Ω–∫–µ" –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–∏–ø–æ—Ç–µ–∑—É ‚Äî –±–µ—Ä–∏ **`requests`** (–∏–ª–∏ `httpx` –≤ sync-—Ä–µ–∂–∏–º–µ), –Ω–µ –º—É—á–∞–π—Å—è.
2. –ï—Å–ª–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å –ø–∞—Ä—Å–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã (–º–∞–≥–∞–∑–∏–Ω—ã, –∫–∞—Ç–∞–ª–æ–≥–∏) ‚Äî **–¢–û–õ–¨–ö–û Async**.
3. –ú–µ–∂–¥—É `aiohttp` –∏ `httpx`:
    - –ë–µ—Ä–∏ **`httpx`**, –µ—Å–ª–∏ —Å–∞–π—Ç –∑–∞—â–∏—â–µ–Ω–Ω—ã–π (–Ω—É–∂–µ–Ω HTTP/2) –∏–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∫—Ä–∞—Å–∏–≤—ã–π –∫–æ–¥.
    - –ë–µ—Ä–∏ **`aiohttp`**, –µ—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è "—Å—ã—Ä–∞—è" –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–æ–Ω —á—É—Ç—å –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –æ–±—ä–µ–º–∞—Ö –≤ 100–∫+ –∑–∞–ø—Ä–æ—Å–æ–≤) –∏ —Ç–µ–±–µ –ø–ª–µ–≤–∞—Ç—å –Ω–∞ HTTP/2.

**–ú–æ–π —Å–æ–≤–µ—Ç:** –ù–∞—á–∏–Ω–∞–π —Å—Ä–∞–∑—É —Å `httpx` (Async). –ü—Ä–∏–≤—ã–∫–∞–π –∫ —Ö–æ—Ä–æ—à–µ–º—É.