# –¢–µ–º–∞ 11: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö: –ü–æ—á–µ–º—É dict ‚Äî —ç—Ç–æ –∑–ª–æ, –∏ –∑–∞—á–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pydantic –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞?

–ù–æ–≤–∏—á–∫–∏ –ª—é–±—è—Ç —Å–ª–æ–≤–∞—Ä–∏ (`dict`).
*"–û, —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª JSON, —è –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—é `data = response.json()` –∏ –±—É–¥—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –∫–ª—é—á–∞–º!"*

–≠—Ç–æ **–º–∏–Ω–∞ –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è**.
–ü–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç –º–∞–ª–µ–Ω—å–∫–∏–π ‚Äî —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ö–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è, —Å–ª–æ–≤–∞—Ä–∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –∫–æ–¥ –≤ –ø–æ–º–æ–π–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

---

### 1. –ü–æ—á–µ–º—É `dict` ‚Äî —ç—Ç–æ –±–æ–ª—å? (–°–∏–Ω–¥—Ä–æ–º "–£–≥–∞–¥–∞–π –ö–ª—é—á")

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –∫–æ–¥:

```python
def process_item(item):
    # –ß—Ç–æ —Ç–∞–∫–æ–µ item? –°–ª–æ–≤–∞—Ä—å. –ö–∞–∫–∏–µ —Ç–∞–º –∫–ª—é—á–∏? –•–ó.
    # –ù–∞–¥–æ –ª–µ–∑—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–ª–∏ –ø—Ä–∏–Ω—Ç–æ–≤–∞—Ç—å item, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å.

    # –û—à–∏–±–∫–∞ 1: –û–ø–µ—á–∞—Ç–∫–∞ –≤ –∫–ª—é—á–µ. –£–∑–Ω–∞–µ—à—å —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.
    name = item['title'] # –ê –Ω–∞ —Å–∞–π—Ç–µ —Å–º–µ–Ω–∏–ª–∏ –∫–ª—é—á –Ω–∞ 'name' -> KeyError

    # –û—à–∏–±–∫–∞ 2: –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.
    price = item['price'] # –ü—Ä–∏—à–ª–æ "1000 —Ä—É–±" (str), –∞ —Ç—ã –∂–¥–∞–ª 1000 (int)
    total = price * 2     # "1000 —Ä—É–±1000 —Ä—É–±" -> –õ–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, —Å–∫—Ä–∏–ø—Ç –Ω–µ —É–ø–∞–ª, –Ω–æ –¥–∞–Ω–Ω—ã–µ –º—É—Å–æ—Ä.

```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–ù–µ—Ç –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (Autocomplete):** IDE –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –ª–µ–∂–∏—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ. –¢—ã –ø–∏—à–µ—à—å –∫–æ–¥ –≤—Å–ª–µ–ø—É—é.
2. **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** –¢—ã —Ç–∞—â–∏—à—å –≥—Ä—è–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–æ–±–µ–ª—ã, `null`, —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ —á–∏—Å–µ–ª) –≥–ª—É–±–æ–∫–æ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
3. **–•—Ä—É–ø–∫–æ—Å—Ç—å:** –°–º–µ–Ω–∏–ª—Å—è API ‚Äî –≤—Å—ë —É–ø–∞–ª–æ –≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.

---

### 2. Pydantic ‚Äî "–ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–π –ö–æ–Ω—Ç—Ä–∞–∫—Ç"

**Pydantic** ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ –±–∞–∑–∞—Ä. –¢—ã –æ–ø–∏—Å—ã–≤–∞–µ—à—å **–°—Ö–µ–º—É** (–∫–ª–∞—Å—Å), –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∞–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á–∏—Å—Ç–∏—Ç –∏ —Ç–∏–ø–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –º—É—Å–æ—Ä.

### –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

```python
from pydantic import BaseModel, HttpUrl, field_validator
from typing import Optional

# –ú—ã –æ–ø–∏—Å—ã–≤–∞–µ–º –ö–û–ù–¢–†–ê–ö–¢.
# –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç ‚Äî –æ–Ω–∏ –Ω–µ –ø—Ä–æ–π–¥—É—Ç –¥–∞–ª—å—à–µ –ø–æ—Ä–æ–≥–∞.
class Product(BaseModel):
    id: int                   # –°–∞–º —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç "123" –≤ 123
    title: str
    price: float              # –°–∞–º —Å–¥–µ–ª–∞–µ—Ç float
    url: HttpUrl              # –ü—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —ç—Ç–æ –≤–∞–ª–∏–¥–Ω–∞—è —Å—Å—ã–ª–∫–∞
    is_available: bool = True # –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

    # –ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ —á–∏—Å—Ç–∏–ª—å—â–∏–∫–∏ (Validators)
    @field_validator('title')
    def clean_title(cls, v):
        return v.strip().upper() # –£–±—Ä–∞–ª–∏ –ø—Ä–æ–±–µ–ª—ã, –∫–∞–ø—Å–æ–º

# --- –í –ë–û–Æ ---

raw_data = {
    "id": "555",             # –°—Ç—Ä–æ–∫–∞!
    "title": "  iphone  ",   # –ü—Ä–æ–±–µ–ª—ã!
    "price": 100.50,
    "url": "<https://apple.com>"
}

# –ú–∞–≥–∏—è:
item = Product(**raw_data)

print(item.id)     # 555 (int) - –¢–∏–ø –∏—Å–ø—Ä–∞–≤–ª–µ–Ω!
print(item.title)  # "IPHONE" - –û—á–∏—â–µ–Ω–æ!
print(item.price)  # 100.5 (float)

# IDE –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç: item. (–∏ –≤—ã–ø–∞–¥–∞—é—Ç –ø–æ–ª—è id, title, price)

```

---

### 3. –ü–æ—á–µ–º—É –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ç—Ä–µ–±—É–µ—Ç Pydantic?

1. **Fail Fast (–ü–∞–¥–∞–π –±—ã—Å—Ç—Ä–æ):**
–ï—Å–ª–∏ —Å–∞–π—Ç –∏–∑–º–µ–Ω–∏–ª API –∏ –Ω–∞—á–∞–ª —Å–ª–∞—Ç—å —Ü–µ–Ω—É –∫–∞–∫ `null`, Pydantic –≤—ã–∫–∏–Ω–µ—Ç –æ—à–∏–±–∫—É **—Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞**. –¢—ã —É–∑–Ω–∞–µ—à—å –æ –ø—Ä–æ–±–ª–µ–º–µ –Ω–∞ —ç—Ç–∞–ø–µ –ø–∞—Ä—Å–∏–Ω–≥–∞, –∞ –Ω–µ –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –∏ –ø–æ–ª—É—á–∏—à—å –∫—Ä–∞—à.
2. **IDE ‚Äî —Ç–≤–æ–π –¥—Ä—É–≥:**
–ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å `item.price`, IDE –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ `float`. –û–Ω–∞ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ —Ç—ã –ø–æ–ø—Ä–æ–±—É–µ—à—å —Å–¥–µ–ª–∞—Ç—å `item.price.upper()`. –í —Å–ª–æ–≤–∞—Ä—è—Ö IDE –º–æ–ª—á–∏—Ç –∫–∞–∫ –ø–∞—Ä—Ç–∏–∑–∞–Ω.
3. **–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (Nesting):**
JSON —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–º (—Å–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏).
–ù–∞ Pydantic —ç—Ç–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Å–∏–≤–æ:
    
    ```python
    class Variant(BaseModel):
        color: str
        size: str
    
    class Product(BaseModel):
        name: str
        variants: list[Variant] # –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤, –∞ –Ω–µ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π!
    
    ```
    
    –¢–µ–ø–µ—Ä—å —Ç—ã –æ–±—Ä–∞—â–∞–µ—à—å—Å—è `product.variants[0].color`. –ß–∏—Å—Ç–æ—Ç–∞.
    
4. **–≠–∫—Å–ø–æ—Ä—Ç:**
–ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª? `item.model_dump_json()` ‚Äî –∏ —É —Ç–µ–±—è –≥–æ—Ç–æ–≤–∞—è JSON-—Å—Ç—Ä–æ–∫–∞. `item.model_dump()` ‚Äî –≥–æ—Ç–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ MongoDB.

---

### üß† –†–µ–∑—é–º–µ:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dict` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ ‚Äî —ç—Ç–æ **–≥–æ–≤–Ω–æ–∫–æ–¥**.
- –õ—é–±–æ–π –ø–∞—Ä—Å–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Ñ–∞–π–ª–∞ `models.py`, –≥–¥–µ –æ–ø–∏—Å–∞–Ω—ã –∫–ª–∞—Å—Å—ã –¥–∞–Ω–Ω—ã—Ö.
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
    1. –ü–æ–ª—É—á–∏–ª –≥—Ä—è–∑–Ω—ã–π HTML/JSON.
    2. –í—ã—Ç–∞—â–∏–ª —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ.
    3. **–¢—É—Ç –∂–µ** –∑–∞–ø–∏—Ö–Ω—É–ª –∏—Ö –≤ Pydantic-–º–æ–¥–µ–ª—å.
    4. –î–∞–ª—å—à–µ —Ä–∞–±–æ—Ç–∞–µ—à—å –¢–û–õ–¨–ö–û —Å –æ–±—ä–µ–∫—Ç–æ–º –º–æ–¥–µ–ª–∏.